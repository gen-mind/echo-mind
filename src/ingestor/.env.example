# EchoMind Ingestor Service Configuration
# Copy to .env and fill in your values for local development

# Service Settings
INGESTOR_ENABLED=true
INGESTOR_HEALTH_PORT=8080

# Database (PostgreSQL)
INGESTOR_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/echomind
INGESTOR_DATABASE_ECHO=false

# NATS JetStream
INGESTOR_NATS_URL=nats://localhost:4222
INGESTOR_NATS_STREAM_NAME=ECHOMIND
INGESTOR_NATS_CONSUMER_NAME=ingestor-consumer

# MinIO (Object Storage)
INGESTOR_MINIO_ENDPOINT=localhost:9000
INGESTOR_MINIO_ACCESS_KEY=minioadmin
INGESTOR_MINIO_SECRET_KEY=minioadmin
INGESTOR_MINIO_SECURE=false
INGESTOR_MINIO_BUCKET=echomind-documents

# Qdrant (Vector Database)
INGESTOR_QDRANT_HOST=localhost
INGESTOR_QDRANT_PORT=6333
# INGESTOR_QDRANT_API_KEY=  # Uncomment if Qdrant requires authentication

# Embedder gRPC Service
INGESTOR_EMBEDDER_HOST=localhost
INGESTOR_EMBEDDER_PORT=50051
INGESTOR_EMBEDDER_TIMEOUT=30.0

# nv-ingest Extraction Settings
# Methods: pdfium (fast), pdfium_hybrid, nemotron_parse (requires NIM)
INGESTOR_EXTRACT_METHOD=pdfium

# Chunking Settings (in TOKENS, not characters)
INGESTOR_CHUNK_SIZE=512
INGESTOR_CHUNK_OVERLAP=50

# Tokenizer for chunking (HuggingFace model)
# Use gpt2 for local dev, meta-llama/Llama-3.2-1B for production
INGESTOR_TOKENIZER=gpt2

# Optional NIMs (set to true if NIMs are deployed)
# YOLOX: Table and chart detection
INGESTOR_YOLOX_ENABLED=false
INGESTOR_YOLOX_ENDPOINT=http://localhost:8001

# Riva: Audio transcription
INGESTOR_RIVA_ENABLED=false
INGESTOR_RIVA_ENDPOINT=http://localhost:50052

# Retry Settings
INGESTOR_MAX_RETRIES=3
INGESTOR_RETRY_BASE_DELAY=1.0

# Logging
INGESTOR_LOG_LEVEL=INFO
